{% comment %}
  USAGE: {% render 'initialize-custom-fonts', font_name: 'Font Name' %}
  comment
  assign font_src_1 = 'https://cdn.shopify.com/s/files/1/0289/0180/2070/files/RiamoSans-Regular.woff2?v=1744599120'
  assign font_src_2 = 'https://cdn.shopify.com/s/files/1/0289/0180/2070/files/Trade_Gothic_LT_Extended.woff2?v=1744605234'

  assign font_1 =  'Riamo Sans Reg'         | append: ':' | append: font_src_1
  assign font_2 =  'Trade Gothic Ext'       | append: ':' | append: font_src_2
  endcomment
{% endcomment %}

{%- liquid
  capture fonts
    echo 'Riamo Sans Reg: https://cdn.shopify.com/s/files/1/0289/0180/2070/files/RiamoSans-Regular.woff2?v=1744599120' | append: ','
    echo 'Trade Gothic Ext: https://cdn.shopify.com/s/files/1/0289/0180/2070/files/Trade_Gothic_LT_Extended.woff2?v=1744605234'
  endcapture

  assign swap        = 'font-display: swap;'
  assign font_exists = false
  assign font_list   = fonts | split: ','
  assign font_index  = 0

  for font in font_list
    assign temp_font_name = font | split: ':' | first | split: ' ' | join: '_' | downcase

    if temp_font_name == font_name
      assign font_index   = forloop.index0
      assign font_exists  = true
    endif
  endfor

  if font_exists == true
    capture render_font
      assign new_font_name  = font_list[font_index] | split: ':' | first
      assign font_src       = font_list[font_index] | split: ':' | last
      assign font_format    = 'format("woff2")'
      assign font_url       = 'url("'  | append: font_src | append: '") '
      assign src            = font_url | append: font_format

      echo '@font-face {'
        echo 'font-family'  | append: ':"' | append: new_font_name   | append: '";'
        echo 'src'          | append: ':' | append: src             | append: ';'
        echo swap
      echo '}'
    endcapture

    echo render_font
  endif
-%}