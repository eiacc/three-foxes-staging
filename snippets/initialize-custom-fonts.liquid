{% comment %}
  USAGE: {% render 'initialize-custom-fonts', font_name: 'Font Name' %}
{% endcomment %}

{%- liquid
  
  assign font_src_1 = 'https://cdn.shopify.com/s/files/1/0289/0180/2070/files/neue.webp?v=1744185756'
 

  assign font_1 =  'Riamo Sans Reg'         | append: ':' | append: font_src_1

 
   capture fonts
    echo font_1
  endcapture

  assign swap        = 'font-display: swap;'
  assign font_exists = false
  assign font_list   = fonts | split: ','
  assign font_index  = 0

  for font in font_list
    assign temp_font_name = font | split: ':' | first | split: ' ' | join: '_' | downcase

    if temp_font_name == font_name
      assign font_index   = forloop.index0
      assign font_exists  = true
    endif
  endfor

  if font_exists == true
    capture render_font
      assign new_font_name  = font_list[font_index] | split: ':' | first
      assign font_src       = font_list[font_index] | split: ':' | last
      assign font_format    = 'format("woff2")'
      assign font_url       = 'url("'  | append: font_src | append: '") '
      assign src            = font_url | append: font_format

      echo '@font-face {'
        echo 'font-family'  | append: ':' | append: new_font_name   | append: ';'
        echo 'src'          | append: ':' | append: src             | append: ';'
        echo swap
      echo '}'
    endcapture

    echo '<style data-test>' | append: render_font | append: '</style>'
  endif
-%}