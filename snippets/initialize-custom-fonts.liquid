{% comment %}
  USAGE: {% render 'initialize-custom-fonts', font_name: 'Font Name' %}
{% endcomment %}

{%- liquid
  capture fonts
    echo 'Riamo Sans Reg: https://cdn.shopify.com/s/files/1/0289/0180/2070/files/RiamoSans-Regular.woff2?v=1744599120' | append: ','
    echo 'Trade Gothic Ext: https://cdn.shopify.com/s/files/1/0289/0180/2070/files/Trade_Gothic_LT_Extended.woff?v=1744605234' | append: ','
    echo 'Custom Serif: https://cdn.shopify.com/s/files/1/0289/0180/2070/files/CustomSerif.ttf?v=1744605999'
  endcapture

  assign swap      = 'font-display: swap;'
  assign font_list = fonts | split: ','

  capture render_fonts
    for font in font_list
      assign font_parts     = font | split: ':'
      assign new_font_name  = font_parts[0] | strip
      assign font_src       = font_parts[1] | strip

      assign ext_parts = font_src | split: '?' | first | split: '.'
      assign extension = ext_parts | last | downcase

      assign format = ''
      if extension == 'woff2'
        assign format = 'format("woff2")'
      elsif extension == 'woff'
        assign format = 'format("woff")'
      elsif extension == 'ttf'
        assign format = 'format("truetype")'
      elsif extension == 'otf'
        assign format = 'format("opentype")'
      else
        assign format = ''
      endif

      assign font_url = 'url("' | append: font_src | append: '")'
      assign src = font_url
      if format != ''
        assign src = src | append: ' ' | append: format
      endif

      echo '@font-face {'
        echo 'font-family: "' | append: new_font_name | append: '";'
        echo 'src: ' | append: src | append: ';'
        echo swap
      echo '}'
    endfor
  endcapture

  echo render_fonts
-%}
